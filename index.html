<html>

<head>
    <title>JSXGraph example</title>
    <script type="text/javascript" charset="UTF-8"
        src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />

    <style>
        main {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>

<body>
    <main>
        <h1>Soma de Riemann</h1>

        <div id="box" class="jxgbox"
            style="width:800px; height:400px; overflow:hidden; /*position:absolute; top:0px; left:0px;*/"></div>
        <!-- Drawing area -->
        <div id="debug" style="display:block;"></div>
    </main>

    <script type="text/javascript">
        var brd = JXG.JSXGraph.initBoard('box', {axis: true, originX: 400, originY: 300, grid: true, unitX: 25, unitY: 25});
        var s = brd.create('slider', [[-12, 3], [-4, 3], [0, 0, 100]], {name: 'n', snapWidth: 1, withLabel: true});
        var a = brd.create('slider', [[-12, 2], [-4, 2], [-10, 0, 0]], {name: 'start', snapWidth: 0.25});
        var b = brd.create('slider', [[-12, 1], [-4, 1], [0, 10, 10]], {name: 'end'});
        var f = (x) => (Math.pow(x, 3) + (x * 4) + 2);
        var plot = brd.create('functiongraph', [f, () => a.Value(), () => b.Value()]);
        brd.unsuspendUpdate();

        var os = brd.create('riemannsum', [
            f,
            () => s.Value(),
            () => 'middle',
            () => a.Value(),
            () => b.Value()
        ], {fillColor: '#ffff00', fillOpacity: 0.3});

        brd.create('text', [
            1,
            -3,
            () => 'Sum=' + (JXG.Math.Numerics.riemannsum(
                f,
                s.Value(),
                'middle',
                a.Value(),
                b.Value()
            )).toFixed(4)
        ], {fontSize: 40});
    </script>
</body>

</html>
